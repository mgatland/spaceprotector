<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/game.css">
	<script src="http://cdn.peerjs.com/0.3/peer.min.js"></script>
	<script>
		var id = window.prompt('choose a unique id');
		var peer = new Peer(id, {key: '6ku8444tfj3y2e29', debug: 3});
		peer.on('open', function(id) {
  			console.log('My peer ID is: ' + id);
		});


		peer.on('connection', function(conn) {
			console.log("Someone connected to you!");
		  	conn.on('data', function(data){
		    	console.log("msg: " + data);
		    	conn.send("tock");
		  	});
		  	conn.on('error', function(err) {
				console.log(err.message + "|" + err.type);
		  	});
		});

		var connectTo = window.prompt('your id is ' + id + '. enter an id to connect to.');
		if (connectTo) {
			var conn = peer.connect(connectTo);
			conn.on('open', function() {
				  // Receive messages
				conn.on('data', function(data) {
				    console.log('Received', data);
				});
				conn.on('error', function(err) {
					console.log(err.message + "|" + err.type);
		  		});

				  // Send messages
				  conn.send('Hello!');

				  setInterval(function () {
				  	conn.send("Tick");
				  }, 1500);
				});
		}
	</script>
</head>
<body>
</body>
</html>